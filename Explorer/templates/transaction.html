{% extends "base.html" %}
{% block title %}Transaction{{ super() }}{% endblock %}

{% block head %}
{{ super() }}
{% endblock %}

{% block additional_text %}Transaction {{ this_transaction[0:10] }}...{{ this_transaction[-4:] }}{% endblock %}

{% block the_form %}
{% endblock %}

{% block start_body %}
{{ super() }}
{% endblock %}

{% block additional_body %}
           <p>
                Hash: {{ this_transaction }}<br />
                Appeared in <a href="/block/{{ block_height }}">{% if config.COIN_NAME is not none %}{{ config.COIN_NAME }}{% else %}Cryptocurrency{% endif %} {{ block_height }}</a> ({{ the_datetime }})<br />
                Number of inputs: {% if inputs|length >= 1 %}{{ inputs|length }}{% endif %} (<a href="#inputs">Jump to inputs</a>)<br />
                Total in: TODO<br />
                Number of outputs: {% if outputs|length >= 1 %}{{ outputs|length }}{% endif %} (<a href="#outputs">Jump to outputs</a>)<br />
                Total out: TODO<br />
                Size: {{ size }} bytes<br />
                Fee: {{ fee }}<br />
                <a href="/api/rawtx/{{ this_transaction }}">Raw transaction</a>
            </p>
            <a id="inputs"><h3>Inputs</h3></a>
            <table class="table">
                <tr><th>Index</th><th>Previous output</th><th>Amount</th><th>From address</th><th>ScriptSig</th></tr>
                {% if coinbase is not none %}
                <tr>
                    <td><a id="i0">i0</a></td>
                    <td>Generation</td>
                    <td>TODO</td>
                    <td>Generation</td>
                    <td>{{ vin.scriptsig }}</td>
                </tr>
                {% for vin in inputs %}
                <tr>
                    <td><a id="i{{ loop.index0 }}">{{ loop.index0 }}</a></td>
                    <td>Generation</td>
                    <td>TODO</td>
                    <td>Generation</td>
                    <td>{{ vin.scriptsig }}</td>
                </tr>
               {% else %}
                <tr>
                    <td><a id="i{{ loop.index0 }}">{{ loop.index0 }}</a></td>
                    <td>TODO</td>
                    <td>TODO</td>
                    <td>TODO</td>
                    <td>{{ vin.scriptsig }}</td>
                </tr>
               {% endfor %}
               {% endif %}
            </table>
            <a id="outputs"><h3>Outputs</h3></a>
            <table class="table">
                <tr><th>Index</th><th>Redeemed at input</th><th>Amount</th><th>To address</th><th>ScriptPubKey</th></tr>
                {% for vout in outputs %}
                    <tr>
                    <td><a id="o{{ loop.index0 }}">{{ loop.index0 }}</a></td>
                    <td><a href="">TODO</a></td>
                    <td>{{ vout.value }}</td>
                    <td><a href="{{ vout.address }}">{{ vout.address }}</a></td>
                    <td>{{ vout.scriptpubkey }}</td>
                </tr>
                {% endfor %}
            </table>
{% endblock %}

{% block footer %}{{ super() }}{% endblock %}